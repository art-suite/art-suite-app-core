import &ArtStandardLib, &ArtEngine

{testDownsampledRedChannelEq, testCompactRedChannelEq} = &CoreHelper

suite: ->
  testDownsampledRedChannelEq
    "drawing rectangles"
    new Element
      size: 4
      new RectangleElement color: #000, size: 4
      new RectangleElement color: #fff, location: 1, size: 3
    compactFlatten []
      0 0 0 0
      0 7 7 7
      0 7 7 7
      0 7 7 7

  testDownsampledRedChannelEq
    "unconstrained drawing"
    new Element
      size: 2, location: 1
      new RectangleElement size: 2, color: "#700"
      new RectangleElement size: 2, location: 1, color: "#f00"

    compactFlatten []
      3 3 0
      3 7 7
      0 7 7

  testDownsampledRedChannelEq
    "aligned rectangle mask drawing"
    new Element
      size: 2
      location: 1
      new RectangleElement size: 2,   color:  #700
      new RectangleElement size: 10,  color:  #f00, location: 1
      new RectangleElement size: 2,   isMask: true

    compactFlatten []
      3 3
      3 7

  testCompactRedChannelEq
    "rotated rectangle"
    new Element
      size: 6
      new RectangleElement color: :black
      new Element
        location: ps: .5
        size:     ps: 2/3
        axis:     .5
        angle:    Math.PI/4
        layoutPixelSnap: false
        new RectangleElement color: #700
        new RectangleElement
          color:    #f00
          location: ps: .5
        new RectangleElement isMask: true

    compactFlatten []
      0 0 1 1 0 0
      0 1 4 4 1 0
      1 4 4 4 4 1
      1 4 5 5 4 1
      0 2 6 6 2 0
      0 0 3 3 0 0

    compactFlatten []
      0 0 1 1 0 0
      0 2 5 5 2 0
      1 5 6 6 5 1
      1 5 7 7 5 1
      0 3 8 8 3 0
      0 0 4 4 0 0

