import &StandardImport

class ApplicationState extends Model
  @abstractClass()

  constructor: ->
    @state = {}

  setState: (key, value) ->
    # log AppState.setState: {} key, value, propsEq @state[key], value
    if !propsEq @state[key], value
      # log AppState.setState.forReal: :keykey
      @state[key] = value
      @load key

  load: (key) ->
    # log load: key
    @updateModelRecord
      key
      modelRecord = if @state.hasOwnProperty key
            status: success, data: @state[key]
      else  status: missing

    modelRecord
