
<!doctype html>
<html lang="en">

<head>
    <title>Code coverage report for source/ArtSuite.Models/FluxEntry.caf</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../../prettify.css" />
    <link rel="stylesheet" href="../../base.css" />
    <link rel="shortcut icon" type="image/x-icon" href="../../favicon.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../../sort-arrow-sprite.png);
        }
    </style>
</head>
    
<body>
<div class='wrapper'>
    <div class='pad1'>
        <h1><a href="../../index.html">All files</a> / <a href="index.html">source/ArtSuite.Models</a> FluxEntry.caf</h1>
        <div class='clearfix'>
            
            <div class='fl pad1y space-right2'>
                <span class="strong">68.12% </span>
                <span class="quiet">Statements</span>
                <span class='fraction'>47/69</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">26.42% </span>
                <span class="quiet">Branches</span>
                <span class='fraction'>14/53</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">48.28% </span>
                <span class="quiet">Functions</span>
                <span class='fraction'>14/29</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">68.97% </span>
                <span class="quiet">Lines</span>
                <span class='fraction'>40/58</span>
            </div>
        
            
        </div>
        <p class="quiet">
            Press <em>n</em> or <em>j</em> to go to the next uncovered block, <em>b</em>, <em>p</em> or <em>k</em> for the previous block.
        </p>
    </div>
    <div class='status-line medium'></div>
    <pre><table class="coverage">
<tr><td class="line-count quiet"><a name='L1'></a><a href='#L1'>1</a>
<a name='L2'></a><a href='#L2'>2</a>
<a name='L3'></a><a href='#L3'>3</a>
<a name='L4'></a><a href='#L4'>4</a>
<a name='L5'></a><a href='#L5'>5</a>
<a name='L6'></a><a href='#L6'>6</a>
<a name='L7'></a><a href='#L7'>7</a>
<a name='L8'></a><a href='#L8'>8</a>
<a name='L9'></a><a href='#L9'>9</a>
<a name='L10'></a><a href='#L10'>10</a>
<a name='L11'></a><a href='#L11'>11</a>
<a name='L12'></a><a href='#L12'>12</a>
<a name='L13'></a><a href='#L13'>13</a>
<a name='L14'></a><a href='#L14'>14</a>
<a name='L15'></a><a href='#L15'>15</a>
<a name='L16'></a><a href='#L16'>16</a>
<a name='L17'></a><a href='#L17'>17</a>
<a name='L18'></a><a href='#L18'>18</a>
<a name='L19'></a><a href='#L19'>19</a>
<a name='L20'></a><a href='#L20'>20</a>
<a name='L21'></a><a href='#L21'>21</a>
<a name='L22'></a><a href='#L22'>22</a>
<a name='L23'></a><a href='#L23'>23</a>
<a name='L24'></a><a href='#L24'>24</a>
<a name='L25'></a><a href='#L25'>25</a>
<a name='L26'></a><a href='#L26'>26</a>
<a name='L27'></a><a href='#L27'>27</a>
<a name='L28'></a><a href='#L28'>28</a>
<a name='L29'></a><a href='#L29'>29</a>
<a name='L30'></a><a href='#L30'>30</a>
<a name='L31'></a><a href='#L31'>31</a>
<a name='L32'></a><a href='#L32'>32</a>
<a name='L33'></a><a href='#L33'>33</a>
<a name='L34'></a><a href='#L34'>34</a>
<a name='L35'></a><a href='#L35'>35</a>
<a name='L36'></a><a href='#L36'>36</a>
<a name='L37'></a><a href='#L37'>37</a>
<a name='L38'></a><a href='#L38'>38</a>
<a name='L39'></a><a href='#L39'>39</a>
<a name='L40'></a><a href='#L40'>40</a>
<a name='L41'></a><a href='#L41'>41</a>
<a name='L42'></a><a href='#L42'>42</a>
<a name='L43'></a><a href='#L43'>43</a>
<a name='L44'></a><a href='#L44'>44</a>
<a name='L45'></a><a href='#L45'>45</a>
<a name='L46'></a><a href='#L46'>46</a>
<a name='L47'></a><a href='#L47'>47</a>
<a name='L48'></a><a href='#L48'>48</a>
<a name='L49'></a><a href='#L49'>49</a>
<a name='L50'></a><a href='#L50'>50</a>
<a name='L51'></a><a href='#L51'>51</a>
<a name='L52'></a><a href='#L52'>52</a>
<a name='L53'></a><a href='#L53'>53</a>
<a name='L54'></a><a href='#L54'>54</a>
<a name='L55'></a><a href='#L55'>55</a>
<a name='L56'></a><a href='#L56'>56</a>
<a name='L57'></a><a href='#L57'>57</a>
<a name='L58'></a><a href='#L58'>58</a>
<a name='L59'></a><a href='#L59'>59</a>
<a name='L60'></a><a href='#L60'>60</a>
<a name='L61'></a><a href='#L61'>61</a>
<a name='L62'></a><a href='#L62'>62</a>
<a name='L63'></a><a href='#L63'>63</a>
<a name='L64'></a><a href='#L64'>64</a>
<a name='L65'></a><a href='#L65'>65</a>
<a name='L66'></a><a href='#L66'>66</a>
<a name='L67'></a><a href='#L67'>67</a>
<a name='L68'></a><a href='#L68'>68</a>
<a name='L69'></a><a href='#L69'>69</a>
<a name='L70'></a><a href='#L70'>70</a>
<a name='L71'></a><a href='#L71'>71</a>
<a name='L72'></a><a href='#L72'>72</a>
<a name='L73'></a><a href='#L73'>73</a>
<a name='L74'></a><a href='#L74'>74</a>
<a name='L75'></a><a href='#L75'>75</a>
<a name='L76'></a><a href='#L76'>76</a>
<a name='L77'></a><a href='#L77'>77</a>
<a name='L78'></a><a href='#L78'>78</a>
<a name='L79'></a><a href='#L79'>79</a>
<a name='L80'></a><a href='#L80'>80</a>
<a name='L81'></a><a href='#L81'>81</a>
<a name='L82'></a><a href='#L82'>82</a>
<a name='L83'></a><a href='#L83'>83</a>
<a name='L84'></a><a href='#L84'>84</a>
<a name='L85'></a><a href='#L85'>85</a>
<a name='L86'></a><a href='#L86'>86</a>
<a name='L87'></a><a href='#L87'>87</a>
<a name='L88'></a><a href='#L88'>88</a>
<a name='L89'></a><a href='#L89'>89</a>
<a name='L90'></a><a href='#L90'>90</a>
<a name='L91'></a><a href='#L91'>91</a>
<a name='L92'></a><a href='#L92'>92</a>
<a name='L93'></a><a href='#L93'>93</a>
<a name='L94'></a><a href='#L94'>94</a>
<a name='L95'></a><a href='#L95'>95</a>
<a name='L96'></a><a href='#L96'>96</a>
<a name='L97'></a><a href='#L97'>97</a>
<a name='L98'></a><a href='#L98'>98</a>
<a name='L99'></a><a href='#L99'>99</a>
<a name='L100'></a><a href='#L100'>100</a>
<a name='L101'></a><a href='#L101'>101</a>
<a name='L102'></a><a href='#L102'>102</a>
<a name='L103'></a><a href='#L103'>103</a>
<a name='L104'></a><a href='#L104'>104</a>
<a name='L105'></a><a href='#L105'>105</a>
<a name='L106'></a><a href='#L106'>106</a>
<a name='L107'></a><a href='#L107'>107</a>
<a name='L108'></a><a href='#L108'>108</a>
<a name='L109'></a><a href='#L109'>109</a>
<a name='L110'></a><a href='#L110'>110</a>
<a name='L111'></a><a href='#L111'>111</a>
<a name='L112'></a><a href='#L112'>112</a>
<a name='L113'></a><a href='#L113'>113</a>
<a name='L114'></a><a href='#L114'>114</a>
<a name='L115'></a><a href='#L115'>115</a>
<a name='L116'></a><a href='#L116'>116</a>
<a name='L117'></a><a href='#L117'>117</a>
<a name='L118'></a><a href='#L118'>118</a>
<a name='L119'></a><a href='#L119'>119</a>
<a name='L120'></a><a href='#L120'>120</a>
<a name='L121'></a><a href='#L121'>121</a>
<a name='L122'></a><a href='#L122'>122</a>
<a name='L123'></a><a href='#L123'>123</a>
<a name='L124'></a><a href='#L124'>124</a>
<a name='L125'></a><a href='#L125'>125</a>
<a name='L126'></a><a href='#L126'>126</a>
<a name='L127'></a><a href='#L127'>127</a>
<a name='L128'></a><a href='#L128'>128</a>
<a name='L129'></a><a href='#L129'>129</a>
<a name='L130'></a><a href='#L130'>130</a>
<a name='L131'></a><a href='#L131'>131</a>
<a name='L132'></a><a href='#L132'>132</a>
<a name='L133'></a><a href='#L133'>133</a>
<a name='L134'></a><a href='#L134'>134</a>
<a name='L135'></a><a href='#L135'>135</a>
<a name='L136'></a><a href='#L136'>136</a>
<a name='L137'></a><a href='#L137'>137</a>
<a name='L138'></a><a href='#L138'>138</a>
<a name='L139'></a><a href='#L139'>139</a>
<a name='L140'></a><a href='#L140'>140</a>
<a name='L141'></a><a href='#L141'>141</a>
<a name='L142'></a><a href='#L142'>142</a>
<a name='L143'></a><a href='#L143'>143</a></td><td class="line-coverage quiet"><span class="cline-any cline-yes">8x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">32x</span>
<span class="cline-any cline-yes">32x</span>
<span class="cline-any cline-yes">32x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">32x</span>
<span class="cline-any cline-yes">32x</span>
<span class="cline-any cline-yes">32x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">32x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">32x</span>
<span class="cline-any cline-yes">568x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4x</span>
<span class="cline-any cline-yes">4x</span>
<span class="cline-any cline-yes">4x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-yes">69x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-yes">3x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4x</span>
<span class="cline-any cline-yes">70x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-yes">70x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">140x</span>
<span class="cline-any cline-yes">70x</span>
<span class="cline-any cline-yes">70x</span>
<span class="cline-any cline-yes">70x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">70x</span>
<span class="cline-any cline-yes">70x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-yes">4x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">34x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">22x</span>
<span class="cline-any cline-yes">4x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">48x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">48x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">30x</span>
<span class="cline-any cline-yes">5x</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">import &amp;StandardImport, &amp;ModelRegistry
&nbsp;
getFluxStore<span class="fstat-no" title="function not covered" > = -&gt; <span class="cstat-no" title="statement not covered" >_</span>fluxStore ?= &amp;FluxStore.fluxStore</span>
&nbsp;
retryExponent = 2
&nbsp;
class FluxEntry extends BaseObject
  @warnCantSetField: warnCantSetField = (newFluxRecord, oldFluxRecord, field) -&gt;
    newValue = newFluxRecord[field]
    oldValue = oldFluxRecord?[field]
    if newFluxRecord.hasOwnProperty(field) &amp;&amp; newValue != oldValue
      console.warn "#{FluxEntry.namespacePath}: Ignoring attempt to update the key of the Entry. Do not attempt to update the '#{field}' field. Attempted new value: #{formattedInspect newValue}. Unchanged, old value: #{formattedInspect oldValue}."
&nbsp;
  @warnUnsettableFields: warnUnsettableFields = (newFluxRecord, oldFluxRecord) -&gt;
    warnCantSetField newFluxRecord, oldFluxRecord, :key
    warnCantSetField newFluxRecord, oldFluxRecord, :modelName
&nbsp;
  # assumes FluxEntry "owns" the fluxRecord - it will alter the object by adding a "key" field
  constructor: (modelName, key) -&gt;
    @_model       = models[modelName]
    @_autoReload  = @_model.autoReloadEnabled
&nbsp;
    @_updatedAt = @_createdAt = toSeconds()
    @_reloadAt  = @_lastSuccessfulLoadAt = null
    @_tryCount  = 0
&nbsp;
    @_fluxRecord = {} key, modelName, @createdAt, @updatedAt, status: pending
&nbsp;
    @_subscribers = []
    @_previousFluxRecord = null
&nbsp;
  @property :createdAt :updatedAt :reloadAt :lastSuccessfulLoadAt :tryCount
  @getter :previousFluxRecord :fluxRecord :subscribers :model :autoReload
  @getter
<span class="fstat-no" title="function not covered" >    dataChanged: -&gt; <span class="cstat-no" title="statement not covered" >!</span>propsEq @_fluxRecord?.data, @_previousFluxRecord?.data</span>
<span class="fstat-no" title="function not covered" >    fluxRecordChanged: -&gt; <span class="cstat-no" title="statement not covered" >!</span>propsEq @_fluxRecord, @_previousFluxRecord</span>
    subscriberCount:  -&gt; @_subscribers.length
<span class="fstat-no" title="function not covered" >    key:              -&gt; <span class="cstat-no" title="statement not covered" >@</span>_fluxRecord.key</span>
    modelName:        -&gt; @_fluxRecord.modelName
<span class="fstat-no" title="function not covered" >    status:           -&gt; <span class="cstat-no" title="statement not covered" >@</span>_fluxRecord.status</span>
    reloadAt:         -&gt; @_fluxRecord.reloadAt
&nbsp;
<span class="fstat-no" title="function not covered" >    age: -&gt;</span>
<span class="cstat-no" title="statement not covered" >      now = <span class="cstat-no" title="statement not covered" >toSeconds()</span></span>
      reload:             now - @reloadAt             | 0
      created:            now - @createdAt            | 0
      updated:            now - @updatedAt            | 0
      lastSuccessfulLoad: now - @lastSuccessfulLoadAt | 0
&nbsp;
<span class="fstat-no" title="function not covered" >    nextNetworkFailureRetryDelay: -&gt;<span class="cstat-no" title="statement not covered" ></span></span>
      if 0 &lt; m = @model.getMinNetworkFailureReloadSeconds()
        min
          m * Math.pow @tryCount ? 1, retryExponent
          @model.getMaxNetworkFailureReloadSeconds()
&nbsp;
<span class="fstat-no" title="function not covered" >    nextServerFailureRetryDelay: -&gt;<span class="cstat-no" title="statement not covered" ></span></span>
      if 0 &lt; m = @model.getMinServerFailureReloadSeconds()
        min
          m * Math.pow @tryCount ? 1, retryExponent
          @model.getMaxServerFailureReloadSeconds()
&nbsp;
<span class="fstat-no" title="function not covered" >    plainStructure: -&gt; <span class="cstat-no" title="statement not covered" >f</span>luxRecord: @_fluxRecord, subscribers: @_subscribers</span>
    hasSubscribers: -&gt; @_subscribers.length &gt; 0
&nbsp;
  @setter
    fluxRecord: (newFluxRecord)-&gt;<span class="missing-if-branch" title="if path not taken" >I</span>
      throw new Error "fluxRecord must be an object" unless newFluxRecord is <span class="cstat-no" title="statement not covered" >Object</span>
      warnUnsettableFields newFluxRecord, oldFluxRecord = @_fluxRecord
&nbsp;
      @_fluxRecord extract key, modelName
      @_fluxRecord = newFluxRecord
      newFluxRecord.key           = key
      newFluxRecord.modelName     = modelName
      newFluxRecord.status        ?= pending
      newFluxRecord.createdAt     = @_createdAt
      newFluxRecord.updatedAt     = @_updatedAt = now = toSeconds()
&nbsp;
      @_updateAutoReloadFields() if <span class="branch-0 cbranch-no" title="branch not covered" >@_autoReload</span>
&nbsp;
<span class="fstat-no" title="function not covered" >    reloadAt: (</span>reloadAt) -&gt; <span class="cstat-no" title="statement not covered" >if 0 &lt; reloadAt</span>
      delta = reloadAt - now = toSeconds()
      rangePerterbation = if delta &lt; 80 then 1 else 15
      rangeMin = delta - rangePerterbation
      rangeMax = delta + rangePerterbation
&nbsp;
      # queue reload if there isn't one already queued within [rangeMin, rangeMax]
      unless @_reloadAt &amp;&amp; (oldDelta = @_reloadAt - now) &gt;= rangeMin &amp;&amp; oldDelta &lt;= rangeMax
&nbsp;
        _memoryLeakFreeReloader
          @modelName
          @key
          # +/- random pertubation so reloads are distributed
          @_reloadAt = reloadAt = now + rangeMin + (rangeMax - rangeMin) * Math.random()
&nbsp;
      @_fluxRecord.reloadAt = @_reloadAt
&nbsp;
<span class="fstat-no" title="function not covered" >  reload: -&gt; <span class="cstat-no" title="statement not covered" >@</span>model.reload @key</span>
&nbsp;
  ##########################
    PRIVATE
  ##########################
  ## _memoryLeakFreeReloader
    IN: modelName &lt;String&gt;, key &lt;String&gt;, reloadAt: &lt;Number&gt;
    Schedule the reload, but don't hold on to any references to this entry.
    If this entry is gone by the time the reload comes around, we shouldn't hold on to this entry the whole time.
    NOTE: _memoryLeakFreeReloader is NOT a member function so "this" doesn't hold on to the object.
  _memoryLeakFreeReloader<span class="fstat-no" title="function not covered" > = (</span>modelName, key, reloadAt) -&gt;<span class="cstat-no" title="statement not covered" ></span>
    timeoutAt <span class="fstat-no" title="function not covered" >reloadAt, -&gt;<span class="cstat-no" title="statement not covered" ></span></span>
      if floatEq reloadAt, entry = getFluxStore()._getEntry(modelName, key)?.reloadAt
        entry.reload()
&nbsp;
<span class="fstat-no" title="function not covered" >  _updateAutoReloadFields: -&gt;</span>
<span class="cstat-no" title="statement not covered" >    reloadDelta = if isSuccess @status</span>
      @lastSuccessfulLoadAt = @_updatedAt
      @tryCount = 1
      @model.getStaleDataReloadSeconds()
&nbsp;
    else if isFailure @status
      @tryCount += 1
<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >      switch @</span>status</span>
        when networkFailure         then <span class="cstat-no" title="statement not covered" >@nextNetworkFailureRetryDelay</span>
        when serverFailure, failure then <span class="cstat-no" title="statement not covered" >@nextServerFailureRetryDelay</span>
&nbsp;
    @_fluxRecord<span class="cstat-no" title="statement not covered" >.lastSuccessfulLoadAt = @lastSuccessfulLoadAt</span>
    @_fluxRecord<span class="cstat-no" title="statement not covered" >.tryCount = <span class="cstat-no" title="statement not covered" >@tryCount</span></span>
    @reloadAt = if reloadDelta &gt; 0 then @_updatedAt + reloadDelta else null
&nbsp;
  _notifySubscribers: -&gt; if @_previousFluxRecord
    each subscriber in @_subscribers
      subscriber @_fluxRecord, @_previousFluxRecord
    @_previousFluxRecord = null
&nbsp;
  _updateFluxRecord: (updateFunction) -&gt;
    @_previousFluxRecord ?= @_fluxRecord
    @setFluxRecord updateFunction?(<span class="branch-2 cbranch-no" title="branch not covered" >@_fluxRecord) || {}</span>
    if propsEq @_fluxRecord, @_previousFluxRecord
      @_previousFluxRecord = null
&nbsp;
  # subscriber is a function with the signature: (FluxEntry) -&gt;
  # to unsubscribe, you must provide the exact same subscription function
  _subscribe:   (subscriber) -&gt; pushIfNotPresent @_subscribers, subscriber
  _unsubscribe: (subscriber) -&gt; removeFirstMatch @_subscribers, subscriber
&nbsp;</pre></td></tr></table></pre>

                <div class='push'></div><!-- for sticky footer -->
            </div><!-- /wrapper -->
            <div class='footer quiet pad2 space-top1 center small'>
                Code coverage generated by
                <a href="https://istanbul.js.org/" target="_blank">istanbul</a>
                at Mon Dec 28 2020 07:45:38 GMT-0800 (Pacific Standard Time)
            </div>
        </div>
        <script src="../../prettify.js"></script>
        <script>
            window.onload = function () {
                prettyPrint();
            };
        </script>
        <script src="../../sorter.js"></script>
        <script src="../../block-navigation.js"></script>
    </body>
</html>
    